; ata2003lk ;
; この中はコメント ;

; 基本的には2003lkと同じ．ただしオペランド順は'i'cのみ ;
; 'i'cや'c'iを使用することは不可 ;
; レジスタはf0-f3,f5のみ使用可．それ以外のレジスタは使用不可 ;
krz 20 f1
krz 10 f0
ata f1 f0

; kueやxokで指定されているラベル以外は加工される ;
; そのラベルと被った場合の対策はまだ行なっていない ;

; 引数の設定は"zali (値)"とする;
; 関数呼び出しは"fenx (関数名)"とする ;
; 呼び出し後は"ycax (積んだ個数/レジスタ)"でスタックを掃除する (値は自動で32bit用は4倍される) ;
zali 10
zali f0
fenx cer-lix
ycax 2

; 関数定義は"cers (関数名)"とする ;
; dosnに来たらリターンする ;
cers cer-lix
; a+b@だけでなくa|b@も使用可能．ただしa|bの場合，bは整数のみ可 ;
krz f5+4@ f0
ata f5|0@ f0
dosn

; untilもどき ;
lar f0 0 xolo
    ata f0 
ral

; コンパイル時定数定義は"snoj (値) (ラベル)"とする ;
; 現在は数値のみ可能 (再帰的な処理を行なっていないため) ;
snoj 10 zehn
krz zehn f0
ata zehn f0

; プリプロセッサは"!fi/!fi-niv (処理) !if"とする ;
; !olは未実装 ;
!fi ubpl
krz 1 f0
!if
!fi-niv ubpl
krz 2003 f0
!if
